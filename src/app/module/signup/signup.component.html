<div class="container">
  <div class="user-form">
    <div class="error-s" *ngIf="isError">
      {{ message }}
    </div>

    <form [formGroup]="userForm" class="form-elements">
      <ng-template matStepLabel>User</ng-template>

      <mat-form-field appearance="outline">
        <mat-label>Username</mat-label>
        <input matInput type="text" formControlName="username" />
        <mat-hint
          class="max-hint"
          *ngIf="
            this.userForm.get('username').dirty &&
            this.userForm.get('username').invalid
          "
        >
          <p
            *ngIf="this.userForm.get('username').hasError('required')"
            class="error"
          >
            *username required.
          </p>

          <p
            *ngIf="this.userForm.get('username').hasError('minlength')"
            class="error"
          >
            *minimun length.
          </p>

          <p
            *ngIf="this.userForm.get('username').hasError('maxlength')"
            class="error"
          >
            *maximum length.
          </p>

          <p
            *ngIf="this.userForm.get('username').hasError('pattern')"
            class="error"
          >
            *invalid username.
          </p>

          <p
            *ngIf="this.userForm.get('username').hasError('InUse')"
            class="error"
          >
            *username is already in use.
          </p>
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>User role</mat-label>
        <mat-select formControlName="userType">
          <mat-option *ngFor="let role of roles" [value]="role">
            {{ role }}
          </mat-option>
        </mat-select>

        <mat-hint
          class="error"
          *ngIf="
            this.userForm.get('userType').hasError('required') &&
            this.userForm.get('email').dirty &&
            this.userForm.get('email').invalid
          "
          >Please Choose role</mat-hint
        >
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Email</mat-label>
        <input matInput type="email" formControlName="email" />
        <mat-hint
          class="max-hint"
          *ngIf="
            this.userForm.get('email').dirty &&
            this.userForm.get('email').invalid
          "
        >
          <p
            *ngIf="this.userForm.get('email').hasError('required')"
            class="error"
          >
            *email required.
          </p>

          <p *ngIf="this.userForm.get('email').hasError('email')" class="error">
            *invalid email.
          </p>

          <p *ngIf="this.userForm.get('email').hasError('InUse')" class="error">
            *email is already in use.
          </p>
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Phone</mat-label>
        <input matInput type="text" formControlName="phone" />
        <mat-hint
          class="max-hint"
          *ngIf="
            this.userForm.get('phone').dirty &&
            this.userForm.get('phone').invalid
          "
        >
          <p
            *ngIf="this.userForm.get('phone').hasError('required')"
            class="error"
          >
            *phone required.
          </p>

          <p
            *ngIf="this.userForm.get('phone').hasError('minlength')"
            class="error"
          >
            *minimun length.
          </p>

          <p
            *ngIf="this.userForm.get('phone').hasError('maxlength')"
            class="error"
          >
            *maximum length.
          </p>

          <p
            *ngIf="this.userForm.get('phone').hasError('pattern')"
            class="error"
          >
            *invalid phone number.
          </p>

          <p *ngIf="this.userForm.get('phone').hasError('InUse')" class="error">
            *phone is already in use.
          </p>
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Password</mat-label>
        <input
          matInput
          [type]="passwordHide ? 'password' : 'text'"
          formControlName="password"
        />
        <img
          (click)="passwordHide = !passwordHide"
          matSuffix
          class="custom-icon"
          [src]="
            passwordHide
              ? '../../assets/icons/eye.svg'
              : '../../assets/icons/eye_close.svg'
          "
        />

        <mat-hint
          class="max-hint"
          *ngIf="
            this.userForm.get('password').dirty &&
            this.userForm.get('password').invalid
          "
        >
          <p
            *ngIf="this.userForm.get('password').hasError('required')"
            class="error"
          >
            *password required.
          </p>

          <p
            *ngIf="this.userForm.get('password').hasError('minlength')"
            class="error"
          >
            *minimun length.
          </p>

          <p
            *ngIf="this.userForm.get('password').hasError('maxlength')"
            class="error"
          >
            *maximum length.
          </p>

          <p
            *ngIf="this.userForm.get('password').hasError('pattern')"
            class="error"
          >
            *invalid password.
          </p>
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Confirm Password</mat-label>
        <input matInput type="password" formControlName="confirmPassword" />

        <mat-hint
          class="max-hint"
          *ngIf="
            this.userForm.get('confirmPassword').dirty &&
            this.userForm.get('confirmPassword').invalid
          "
        >
          <p
            *ngIf="this.userForm.get('confirmPassword').hasError('required')"
            class="error"
          >
            *password required.
          </p>

          <p
            *ngIf="
              this.userForm.get('confirmPassword').hasError('MatchPassword')
            "
            class="error"
          >
            *password and confirm password mismatch.
          </p>
        </mat-hint>
      </mat-form-field>

      <p class="error" *ngIf="passwordError">
        Password and confirm password doesnot match
      </p>
    </form>
    <div class="button-grouper">
      <button
        [disabled]="userForm.invalid"
        mat-raised-button
        color="primary"
        (click)="createUser()"
      >
        <span>Sign Up</span>
      </button>

      <button mat-raised-button [routerLink]="['/', 'login']">
        <span>Sign In</span>
      </button>
    </div>
  </div>
</div>
